/*
 * LogPane.java
 *
 * Created on July 5, 2008, 4:38 AM
 */

package sicce.api.processor.viewer.controls;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.DefaultListModel;
import sicce.api.processor.Processor;
import sicce.api.processor.viewer.handlers.LogHandler;

/**
 *
 * @author  gish@c
 */
public class LogPane extends javax.swing.JPanel implements ActionListener {
    
    /** Creates new form LogPane */
    public LogPane() {
        initComponents();
        this.logList.setModel(getListModel());
        AttachLogToDataProcessor();
    }
    
    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jScrollPane1 = new javax.swing.JScrollPane();
        logList = new javax.swing.JList();

        setName("Form"); // NOI18N
        setLayout(new java.awt.BorderLayout());

        jScrollPane1.setName("jScrollPane1"); // NOI18N

        logList.setName("logList"); // NOI18N
        jScrollPane1.setViewportView(logList);

        add(jScrollPane1, java.awt.BorderLayout.CENTER);
    }// </editor-fold>//GEN-END:initComponents
    
    
    // Variables declaration - do not modify//GEN-BEGIN:variables
    private javax.swing.JScrollPane jScrollPane1;
    private javax.swing.JList logList;
    // End of variables declaration//GEN-END:variables
    
    private DefaultListModel listModel;
    
    private DefaultListModel getListModel(){
        if(listModel == null){
            listModel = new DefaultListModel();
        }
        return listModel;
    }
    
    private LogHandler logHandler;
    private LogHandler getLogHandler(){
        if(logHandler == null){
            logHandler = new LogHandler(getListModel());
        }
        return logHandler;
    }
    
    /**
     * 
     */
    private void AttachLogToDataProcessor(){
        Processor.AddObserver(getLogHandler().getLogObserver());
    }

    public void actionPerformed(ActionEvent e) {
        getLogHandler().HandlePowerMeterVisibility(e.getActionCommand(), (e.getID() == 1) ? true : false);
    }
    
}
